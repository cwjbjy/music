(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-search-search"],{"07d5":function(t,e,i){"use strict";i.r(e);var n=i("b9a1"),a=i("b29a");for(var o in a)"default"!==o&&function(t){i.d(e,t,(function(){return a[t]}))}(o);i("0cd8");var r,s=i("f0c5"),l=Object(s["a"])(a["default"],n["b"],n["c"],!1,null,"13f672b9",null,!1,n["a"],r);e["default"]=l.exports},"0cd8":function(t,e,i){"use strict";var n=i("a006"),a=i.n(n);a.a},"4d62":function(t,e,i){"use strict";i("a9e3"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n={name:"u-search",props:{shape:{type:String,default:"round"},bgColor:{type:String,default:"#f2f2f2"},placeholder:{type:String,default:"请输入关键字"},clearabled:{type:Boolean,default:!0},focus:{type:Boolean,default:!1},showAction:{type:Boolean,default:!0},actionStyle:{type:Object,default:function(){return{}}},actionText:{type:String,default:"搜索"},inputAlign:{type:String,default:"left"},disabled:{type:Boolean,default:!1},animation:{type:Boolean,default:!1},borderColor:{type:String,default:"none"},value:{type:String,default:""},height:{type:[Number,String],default:64},inputStyle:{type:Object,default:function(){return{}}},maxlength:{type:[Number,String],default:"-1"},searchIconColor:{type:String,default:""},color:{type:String,default:"#606266"},placeholderColor:{type:String,default:"#909399"},margin:{type:String,default:"0"},searchIcon:{type:String,default:"search"}},data:function(){return{keyword:"",showClear:!1,show:!1,focused:this.focus}},watch:{keyword:function(t){this.$emit("input",t),this.$emit("change",t)},value:{immediate:!0,handler:function(t){this.keyword=t}}},computed:{showActionBtn:function(){return!(this.animation||!this.showAction)},borderStyle:function(){return this.borderColor?"1px solid ".concat(this.borderColor):"none"}},methods:{inputChange:function(t){this.keyword=t.detail.value},clear:function(){var t=this;this.keyword="",this.$nextTick((function(){t.$emit("clear")}))},search:function(t){this.$emit("search",t.detail.value);try{uni.hideKeyboard()}catch(t){}},custom:function(){this.$emit("custom",this.keyword);try{uni.hideKeyboard()}catch(t){}},getFocus:function(){this.focused=!0,this.animation&&this.showAction&&(this.show=!0),this.$emit("focus",this.keyword)},blur:function(){var t=this;setTimeout((function(){t.focused=!1}),100),this.show=!1,this.$emit("blur",this.keyword)},clickHandler:function(){this.disabled&&this.$emit("click")}}};e.default=n},5500:function(t,e,i){"use strict";i.r(e);var n=i("58f3"),a=i.n(n);for(var o in n)"default"!==o&&function(t){i.d(e,t,(function(){return n[t]}))}(o);e["default"]=a.a},"58f3":function(t,e,i){"use strict";i("99af"),i("d81d"),i("a434"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n={data:function(){return{id:null,placeholder:"",keyword:"",songCount:0,hotlist:[],suggest:[],result:[],playlist:[],search_key:[],history_list:[],flag:0}},watch:{flag:{handler:function(t){var e=this;0===t&&uni.getStorage({key:"search_key",success:function(t){e.history_list=t.data}})},immediate:!0}},onLoad:function(){this.hot(),this.searchDefault()},methods:{focus:function(t){""!==t&&(this.flag=1)},searchDefault:function(){var t=this;this.$API({url:"/search/default"}).then((function(e){t.placeholder=e.data.data.realkeyword}))},hot:function(){var t=this;this.$API({url:"/search/hot"}).then((function(e){t.hotlist=e.data.result.hots}))},inputChange:function(){var t=this;2!==this.flag&&(this.flag=1,""!==this.keyword?this.$API({url:"/search/suggest?keywords=".concat(this.keyword,"&type=mobile")}).then((function(e){t.suggest=e.data.result.allMatch})):this.flag=0)},clearSearch:function(){this.flag=0},hotClick:function(t){this.keyword=t},clickSuggest:function(t){var e=this;this.keyword=t,this.search_key.push({keyword:this.keyword}),uni.setStorage({key:"search_key",data:this.search_key}),this.flag=2,this.$API({url:"/search?keywords=".concat(t,"&limit=10")}).then((function(t){e.songCount=t.data.result.songCount,e.result=t.data.result.songs,e.result.map((function(t){e.playlist.push(t.id)}))}))},resultClick:function(t){var e=this;this.id=t,this.$API({url:"/check/music?id=".concat(this.id)}).then((function(t){t.data.success?uni.navigateTo({url:"../../pages/musicPlay/musicPlay?id=".concat(e.id,"&playlist=").concat(e.playlist)}):uni.showToast({icon:"none",title:t.data.message})}))},close:function(t){for(var e=0,i=this.history_list.length;e<i;e++)if(this.history_list[e].keyword==t){this.history_list.splice(e,1),uni.setStorage({key:"search_key",data:this.search_key});break}}}};e.default=n},5904:function(t,e,i){"use strict";i.r(e);var n=i("f0f7"),a=i("5500");for(var o in a)"default"!==o&&function(t){i.d(e,t,(function(){return a[t]}))}(o);i("a247");var r,s=i("f0c5"),l=Object(s["a"])(a["default"],n["b"],n["c"],!1,null,"12ae3408",null,!1,n["a"],r);e["default"]=l.exports},"74b4":function(t,e,i){var n=i("865b");"string"===typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);var a=i("4f06").default;a("01201deb",n,!0,{sourceMap:!1,shadowMode:!1})},"865b":function(t,e,i){var n=i("24fb");e=n(!1),e.push([t.i,'@charset "UTF-8";\r\n/**\r\n * 这里是uni-app内置的常用样式变量\r\n *\r\n * uni-app 官方扩展插件及插件市场（https://ext.dcloud.net.cn）上很多三方插件均使用了这些样式变量\r\n * 如果你是插件开发者，建议你使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\r\n *\r\n */\r\n/**\r\n * 如果你是App开发者（插件使用者），你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\r\n *\r\n * 如果你的项目同样使用了scss预处理，你也可以直接在你的 scss 代码中使用如下变量，同时无需 import 这个文件\r\n */\r\n/* 颜色变量 */\r\n/* 主题色 */\r\n/* 行为相关颜色 */\r\n/* 文字基本颜色 */\r\n/* 背景颜色 */\r\n/* 边框颜色 */\r\n/* 尺寸变量 */\r\n/* 文字尺寸 */\r\n/* 图片尺寸 */\r\n/* Border Radius */\r\n/* 水平间距 */\r\n/* 垂直间距 */\r\n/* 透明度 */\r\n/* 文章场景相关 */.input_box[data-v-12ae3408]{padding:%?30?% %?20?%;border-bottom:%?1?% solid hsla(0,0%,66.7%,.19);-webkit-box-sizing:border-box;box-sizing:border-box}.hotlist[data-v-12ae3408]{padding:%?30?% %?20?% 0}.hotlist .title[data-v-12ae3408]{font-size:%?24?%;line-height:%?24?%;color:#666}.hotlist .list[data-v-12ae3408]{margin:%?20?% 0 %?14?%}.hotlist .list .item[data-v-12ae3408]{display:inline-block;height:%?64?%;margin-right:%?16?%;margin-bottom:%?16?%;padding:0 %?28?%;font-size:%?28?%;line-height:%?64?%;color:#333;border:%?1?% solid #d3d4da;-webkit-border-radius:%?64?%;border-radius:%?64?%}.suggest .recom[data-v-12ae3408]{height:%?100?%;margin-left:%?20?%;padding-right:%?20?%;font-size:%?30?%;line-height:%?100?%;color:#507daf;border-bottom:%?1?% solid rgba(211,212,218,.28)}.suggest .suggest_item[data-v-12ae3408]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:center;-webkit-align-items:center;align-items:center;height:%?90?%;padding-left:%?20?%}.suggest .suggest_item .span[data-v-12ae3408]{margin-left:%?14?%;display:inline-block;-webkit-box-flex:1;-webkit-flex:1;flex:1;width:1%;padding-right:%?20?%;font-size:%?30?%;line-height:%?90?%;color:#333;border-bottom:%?1?% solid rgba(211,212,218,.28)}.result_item[data-v-12ae3408]{height:%?110?%;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:center;-webkit-align-items:center;align-items:center;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;border-bottom:%?1?% solid hsla(0,0%,66.7%,.19);padding-left:%?30?%}.result_item .item_left[data-v-12ae3408]{width:80%}.result_item .item_left .newSongTitle[data-v-12ae3408]{font-size:%?34?%;color:#333}.result_item .item_left .newSongAuthor[data-v-12ae3408]{font-size:%?24?%;color:#888;margin-top:%?8?%}.result_item .item_left .f-thide[data-v-12ae3408]{overflow:hidden;text-overflow:ellipsis;white-space:nowrap;word-break:normal}.result_item .item_right[data-v-12ae3408]{padding:0 %?20?%}.result_item .item_right .iconfont[data-v-12ae3408]{color:#aaa}.result_item .item_right .playIcon[data-v-12ae3408]{font-size:%?40?%}.history_item[data-v-12ae3408]{display:-webkit-box;display:-webkit-flex;display:flex}.history_item .right[data-v-12ae3408]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;-webkit-box-flex:1;-webkit-flex:1;flex:1;margin-left:%?20?%;border-bottom:%?1?% solid hsla(0,0%,66.7%,.19);height:%?90?%;line-height:%?90?%}',""]),t.exports=e},a006:function(t,e,i){var n=i("f410");"string"===typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);var a=i("4f06").default;a("24a685f4",n,!0,{sourceMap:!1,shadowMode:!1})},a247:function(t,e,i){"use strict";var n=i("74b4"),a=i.n(n);a.a},b29a:function(t,e,i){"use strict";i.r(e);var n=i("4d62"),a=i.n(n);for(var o in n)"default"!==o&&function(t){i.d(e,t,(function(){return n[t]}))}(o);e["default"]=a.a},b9a1:function(t,e,i){"use strict";i.d(e,"b",(function(){return a})),i.d(e,"c",(function(){return o})),i.d(e,"a",(function(){return n}));var n={uIcon:i("4755").default},a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-uni-view",{staticClass:"u-search",style:{margin:t.margin},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.clickHandler.apply(void 0,arguments)}}},[i("v-uni-view",{staticClass:"u-content",style:{backgroundColor:t.bgColor,borderRadius:"round"==t.shape?"100rpx":"10rpx",border:t.borderStyle,height:t.height+"rpx"}},[i("v-uni-view",{staticClass:"u-icon-wrap"},[i("u-icon",{staticClass:"u-clear-icon",attrs:{size:30,name:t.searchIcon,color:t.searchIconColor?t.searchIconColor:t.color}})],1),i("v-uni-input",{staticClass:"u-input",style:[{textAlign:t.inputAlign,color:t.color,backgroundColor:t.bgColor},t.inputStyle],attrs:{"confirm-type":"search",value:t.value,disabled:t.disabled,focus:t.focus,maxlength:t.maxlength,"placeholder-class":"u-placeholder-class",placeholder:t.placeholder,"placeholder-style":"color: "+t.placeholderColor,type:"text"},on:{blur:function(e){arguments[0]=e=t.$handleEvent(e),t.blur.apply(void 0,arguments)},confirm:function(e){arguments[0]=e=t.$handleEvent(e),t.search.apply(void 0,arguments)},input:function(e){arguments[0]=e=t.$handleEvent(e),t.inputChange.apply(void 0,arguments)},focus:function(e){arguments[0]=e=t.$handleEvent(e),t.getFocus.apply(void 0,arguments)}}}),t.keyword&&t.clearabled&&t.focused?i("v-uni-view",{staticClass:"u-close-wrap",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.clear.apply(void 0,arguments)}}},[i("u-icon",{staticClass:"u-clear-icon",attrs:{name:"close-circle-fill",size:"34",color:"#c0c4cc"}})],1):t._e()],1),i("v-uni-view",{staticClass:"u-action",class:[t.showActionBtn||t.show?"u-action-active":""],style:[t.actionStyle],on:{click:function(e){e.stopPropagation(),e.preventDefault(),arguments[0]=e=t.$handleEvent(e),t.custom.apply(void 0,arguments)}}},[t._v(t._s(t.actionText))])],1)},o=[]},f0f7:function(t,e,i){"use strict";i.d(e,"b",(function(){return a})),i.d(e,"c",(function(){return o})),i.d(e,"a",(function(){return n}));var n={uSearch:i("07d5").default,uIcon:i("4755").default},a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-uni-view",{staticClass:"container"},[i("v-uni-view",{staticClass:"input_box"},[i("u-search",{attrs:{placeholder:t.placeholder,clearabled:!0,"show-action":!1,focus:!0},on:{change:function(e){arguments[0]=e=t.$handleEvent(e),t.inputChange.apply(void 0,arguments)},clear:function(e){arguments[0]=e=t.$handleEvent(e),t.clearSearch.apply(void 0,arguments)},focus:function(e){arguments[0]=e=t.$handleEvent(e),t.focus.apply(void 0,arguments)}},model:{value:t.keyword,callback:function(e){t.keyword=e},expression:"keyword"}})],1),0===t.flag?i("v-uni-view",{staticClass:"hotlist"},[i("v-uni-view",{staticClass:"title"},[t._v("热门搜索")]),i("v-uni-view",{staticClass:"list"},t._l(t.hotlist,(function(e,n){return i("v-uni-view",{key:n,staticClass:"item",on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.hotClick(e.first)}}},[t._v(t._s(e.first))])})),1),i("v-uni-view",{staticClass:"history_list"},t._l(t.history_list,(function(e,n){return i("v-uni-view",{key:n,staticClass:"history_item"},[i("u-icon",{attrs:{name:"clock",color:"#ccc",size:"32"}}),i("v-uni-view",{staticClass:"right"},[i("v-uni-view",[t._v(t._s(e.keyword))]),i("u-icon",{attrs:{name:"close",color:"#ccc"},on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.close(e.keyword)}}})],1)],1)})),1)],1):t._e(),1===t.flag?i("v-uni-view",{staticClass:"suggest"},[i("v-uni-view",{staticClass:"recom"},[t._v("搜索："+t._s(t.keyword))]),t._l(t.suggest,(function(e,n){return i("v-uni-view",{key:n,staticClass:"suggest_item",on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.clickSuggest(e.keyword)}}},[i("u-icon",{attrs:{name:"search"}}),i("v-uni-view",{staticClass:"span"},[t._v(t._s(e.keyword))])],1)}))],2):t._e(),2===t.flag?i("v-uni-view",{staticClass:"result"},t._l(t.result,(function(e,n){return i("v-uni-view",{key:e.id,staticClass:"result_item",on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.resultClick(e.id)}}},[i("v-uni-view",{staticClass:"item_left"},[i("v-uni-view",{staticClass:"f-thide newSongTitle"},[i("v-uni-text",[t._v(t._s(e.name))])],1),i("v-uni-view",{staticClass:"f-thide newSongAuthor"},[t._v(t._s(t._f("author")(e.artists))+" - "+t._s(e.album.name))])],1),i("v-uni-view",{staticClass:"item_right"},[i("v-uni-view",{staticClass:"iconfont icon-plus-start playIcon"})],1)],1)})),1):t._e()],1)},o=[]},f410:function(t,e,i){var n=i("24fb");e=n(!1),e.push([t.i,'@charset "UTF-8";\r\n/**\r\n * 这里是uni-app内置的常用样式变量\r\n *\r\n * uni-app 官方扩展插件及插件市场（https://ext.dcloud.net.cn）上很多三方插件均使用了这些样式变量\r\n * 如果你是插件开发者，建议你使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\r\n *\r\n */\r\n/**\r\n * 如果你是App开发者（插件使用者），你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\r\n *\r\n * 如果你的项目同样使用了scss预处理，你也可以直接在你的 scss 代码中使用如下变量，同时无需 import 这个文件\r\n */\r\n/* 颜色变量 */\r\n/* 主题色 */\r\n/* 行为相关颜色 */\r\n/* 文字基本颜色 */\r\n/* 背景颜色 */\r\n/* 边框颜色 */\r\n/* 尺寸变量 */\r\n/* 文字尺寸 */\r\n/* 图片尺寸 */\r\n/* Border Radius */\r\n/* 水平间距 */\r\n/* 垂直间距 */\r\n/* 透明度 */\r\n/* 文章场景相关 */.u-search[data-v-13f672b9]{\r\ndisplay:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;flex-direction:row;\r\n-webkit-box-align:center;-webkit-align-items:center;align-items:center;-webkit-box-flex:1;-webkit-flex:1;flex:1}.u-content[data-v-13f672b9]{\r\ndisplay:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;flex-direction:row;\r\n-webkit-box-align:center;-webkit-align-items:center;align-items:center;padding:0 %?18?%;-webkit-box-flex:1;-webkit-flex:1;flex:1}.u-clear-icon[data-v-13f672b9]{\r\ndisplay:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;flex-direction:row;\r\n-webkit-box-align:center;-webkit-align-items:center;align-items:center}.u-input[data-v-13f672b9]{-webkit-box-flex:1;-webkit-flex:1;flex:1;font-size:%?28?%;line-height:1;margin:0 %?10?%;color:#909399}.u-close-wrap[data-v-13f672b9]{width:%?40?%;height:100%;\r\ndisplay:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;flex-direction:row;\r\n-webkit-box-align:center;-webkit-align-items:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center;-webkit-border-radius:50%;border-radius:50%}.u-placeholder-class[data-v-13f672b9]{color:#909399}.u-action[data-v-13f672b9]{font-size:%?28?%;color:#303133;width:0;overflow:hidden;-webkit-transition:all .3s;transition:all .3s;white-space:nowrap;text-align:center}.u-action-active[data-v-13f672b9]{width:%?80?%;margin-left:%?10?%}',""]),t.exports=e}}]);